<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.jhta.soop.dao.TaskDAO">
	
	<select id="selectAll" resultType="kr.co.jhta.soop.dto.TaskDTO" >
		SELECT task_no, project_no, member_no, task_title, task_register_date, task_content, task_status, task_start_date, task_end_date
		FROM task
	</select>
	
	
	<insert id="insertOne" parameterType="kr.co.jhta.soop.dto.TaskDTO">
		INSERT INTO task(project_no, member_no, task_title, task_register_date, task_content, task_status, task_start_date, task_end_date)
 		VALUES (#{project_no}, #{member_no}, #{task_title}, DATE_ADD(NOW(), INTERVAL 9 HOUR), #{task_content}, #{task_status}, DATE_FORMAT(STR_TO_DATE(#{task_start_date}, '%m/%d/%Y'),'%Y-%m-%d '), DATE_FORMAT(STR_TO_DATE( #{task_end_date}, '%m/%d/%Y'),'%Y-%m-%d ')) 
	</insert>
	

	<select id="selectOne" resultType="kr.co.jhta.soop.dto.TaskDTO" parameterType="int">
		SELECT task_no, project_no, member_no, task_title, task_register_date, task_content, task_status, task_start_date, task_end_date
		FROM task
		WHERE task_no = #{task_no}
	</select>
	
	
	<update id="updateOne" parameterType="kr.co.jhta.soop.dto.TaskDTO">
		UPDATE task
		SET task_title = #{task_title}, task_register_date = DATE_ADD(NOW(), INTERVAL 9 HOUR), task_content = #{task_content}, task_status = #{task_status}, task_start_date = DATE_FORMAT(STR_TO_DATE(#{task_start_date}, '%m/%d/%Y'),'%Y-%m-%d '), task_end_date = DATE_FORMAT(STR_TO_DATE( #{task_end_date}, '%m/%d/%Y'),'%Y-%m-%d ')
		WHERE task_no = #{task_no}
	</update>



	<delete id="deleteOne" parameterType="int">
		DELETE FROM task
		WHERE task_no = #{task_no}
	</delete>
	
	
</mapper>